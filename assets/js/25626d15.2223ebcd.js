"use strict";(globalThis.webpackChunkfrontend=globalThis.webpackChunkfrontend||[]).push([[268],{7258:(e,t,s)=>{s.r(t),s.d(t,{default:()=>o});var n=s(6540),a=s(1656),i=s(4848);const o=()=>{const[e,t]=(0,n.useState)([]),[s,o]=(0,n.useState)(""),[c,r]=(0,n.useState)(!1),[l,d]=(0,n.useState)(""),h=(0,n.useRef)(null);(0,n.useEffect)(()=>{h.current?.scrollIntoView({behavior:"smooth"})},[e]),(0,n.useEffect)(()=>{const e=()=>{const e=window.getSelection();""!==e.toString().trim()&&d(e.toString().trim())};return document.addEventListener("mouseup",e),()=>{document.removeEventListener("mouseup",e)}},[]);const m=async()=>{if(!s.trim()||c)return;const n={id:Date.now(),text:s,sender:"user",timestamp:new Date};t(e=>[...e,n]),o(""),r(!0);try{const n={query:s,selected_text:l||null,history:e.map(e=>({role:e.sender,content:e.text}))},a=l?"http://localhost:8000/chat/selected":"http://localhost:8000/chat",i=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),o=await i.json();if(i.ok){const e={id:Date.now()+1,text:o.response,sender:"bot",citations:o.citations||[],timestamp:new Date};t(t=>[...t,e])}else{const e={id:Date.now()+1,text:"Sorry, I encountered an error. Please try again.",sender:"bot",timestamp:new Date};t(t=>[...t,e])}}catch(a){const e={id:Date.now()+1,text:"Sorry, I encountered an error. Please try again.",sender:"bot",timestamp:new Date};t(t=>[...t,e])}finally{r(!1)}};return(0,i.jsx)(a.A,{title:"AI Chat",description:"Humanoid Robotics Textbook Assistant",children:(0,i.jsxs)("div",{className:"chat-container",children:[(0,i.jsxs)("div",{className:"chat-header",children:[(0,i.jsxs)("div",{className:"header-content",children:[(0,i.jsx)("h1",{children:"\ud83e\udd16 Humanoid Robotics Assistant"}),(0,i.jsx)("p",{children:"Ask me anything about the textbook content!"})]}),(0,i.jsxs)("div",{className:"header-actions",children:[l&&(0,i.jsxs)("div",{className:"selected-text-indicator",children:[(0,i.jsxs)("span",{children:['Using selected text: "',l.substring(0,50),l.length>50?"...":"",'"']}),(0,i.jsx)("button",{onClick:()=>d(""),className:"clear-selection-btn",children:"Clear"})]}),e.length>0&&(0,i.jsx)("button",{onClick:()=>{t([]),d("")},className:"clear-chat-btn",children:"Clear Chat"})]})]}),(0,i.jsxs)("div",{className:"chat-messages",children:[0===e.length?(0,i.jsx)("div",{className:"welcome-message",children:(0,i.jsxs)("div",{className:"welcome-content",children:[(0,i.jsx)("h2",{children:"Hello! I'm your Humanoid Robotics textbook assistant."}),(0,i.jsx)("p",{children:"Ask me anything about the textbook content and I'll provide answers based on the material."}),(0,i.jsxs)("div",{className:"suggestions",children:[(0,i.jsx)("div",{className:"suggestion-item",onClick:()=>o("What is humanoid robotics?"),children:"What is humanoid robotics?"}),(0,i.jsx)("div",{className:"suggestion-item",onClick:()=>o("Explain bipedal locomotion"),children:"Explain bipedal locomotion"}),(0,i.jsx)("div",{className:"suggestion-item",onClick:()=>o("How do robots maintain balance?"),children:"How do robots maintain balance?"}),(0,i.jsx)("div",{className:"suggestion-item",onClick:()=>o("What are the key challenges in humanoid robotics?"),children:"What are the key challenges?"})]})]})}):e.map(e=>(0,i.jsxs)("div",{className:`message ${e.sender}`,children:[(0,i.jsx)("div",{className:"message-content",children:e.text}),e.citations&&e.citations.length>0&&(0,i.jsx)("div",{className:"citations",children:(0,i.jsxs)("details",{children:[(0,i.jsx)("summary",{children:"Citations"}),(0,i.jsx)("ul",{children:e.citations.map((e,t)=>(0,i.jsxs)("li",{children:[(0,i.jsxs)("strong",{children:[e.chapter," - ",e.section]}),(0,i.jsxs)("p",{children:[e.content.substring(0,100),"..."]})]},t))})]})}),(0,i.jsx)("div",{className:"message-timestamp",children:e.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},e.id)),c&&(0,i.jsx)("div",{className:"message bot",children:(0,i.jsx)("div",{className:"message-content",children:(0,i.jsxs)("div",{className:"typing-indicator",children:[(0,i.jsx)("span",{}),(0,i.jsx)("span",{}),(0,i.jsx)("span",{})]})})}),(0,i.jsx)("div",{ref:h})]}),(0,i.jsx)("div",{className:"chat-input-area",children:(0,i.jsxs)("div",{className:"chat-input-container",children:[(0,i.jsx)("textarea",{value:s,onChange:e=>o(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),m())},placeholder:l?"Ask about the selected text...":"Ask about the textbook...",className:"chat-input",rows:"1"}),(0,i.jsx)("button",{onClick:m,disabled:!s.trim()||c,className:"chat-send-button",children:(0,i.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsx)("path",{d:"M22 2L11 13",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,i.jsx)("path",{d:"M22 2L15 22L11 13L2 9L22 2Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})})]})})]})})}}}]);